import { useState, useEffect } from 'react';
import { Preview, Story, Meta, Props } from '@storybook/addon-docs/blocks';
import { optionsArray, boxSize } from './SearchBox.stories.tsx';
import * as stories from './SearchBox.stories';
import { select } from '@storybook/addon-knobs';
import { SearchBox } from './SearchBox';

<Meta title="In-review" component={SearchBox} />

# SearchBox

### Add a auto suggest text box

<Preview withToolbar>
    <Story name="Default SearchBox">
        <SearchBox
            options={optionsArray}
            searchBoxSize={select('boxSize', boxSize, 'M')}
            onSearchInputChange={value => console.log(value)}
        />
    </Story>
</Preview>

<Preview withToolbar>
    <Story name="SearchBox With All Handlers">
        {() => {
            const [options, setOptions] = useState([]);
            const onSearchInputChangeHandler = value => {
                if (value.length > 2) {
                    setOptions([...optionsArray, { label: 'Test', value: 'Test' }]);
                } else {
                    setOptions([]);
                }
            };
            const onOptionSelectedHandler = option => {
                console.log('option', option);
            };
            return (
                <SearchBox
                    placeholder="Search"
                    onSearchInputChange={onSearchInputChangeHandler}
                    onOptionSelected={onOptionSelectedHandler}
                    options={options}
                    searchBoxSize={select('boxSize', boxSize, 'M')}
                />
            );
        }}
    </Story>
</Preview>

### Props

<Props of={SearchBox} />

##### Small search text box

<Preview>
    <SearchBox searchBoxSize="S" />
</Preview>

##### Medium search text box

<Preview>
    <SearchBox searchBoxSize="M" />
</Preview>

#### Pending things in story

-   [ ] onFocus and onBlur
-   [ ] rgba fix
-   [ ] refactor
-   [x] maxHeight
-   [x] unit tests
-   [x] deploy in storybook for feedback
-   [x] onOptionSelected
-   [x] keyboard selection
-   [x] UI Styles
-   [x] re-add useMemo
-   [x] remove any
-   [x] boxShadow
-   [x] introduce size in storybook

#### Open question

-   should we handle debounce?
-   should we handle length for input text?
