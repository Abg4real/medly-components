import { Table } from '../Table';
import { useState, useCallback } from 'react';
import { action } from '@storybook/addon-actions';
import { boolean, select } from '@storybook/addon-knobs';
import { Preview, Story, Meta, Props } from '@storybook/addon-docs/blocks';
import { ThemeInterface, ColumnConfigInterface, ExpandedRowComponent, DarkBackground } from './Table.stories';
import { filterData } from './filterData';
import columns from './columns';
import data from './data';

<Meta
    title="Core"
    component={Table}
    parameters={{
        design: {
            type: 'figma',
            url: 'https://www.figma.com/file/vA4EQdxl0d0ETtYpw2uSjW/Medly-Pattern-Library-B2B-Internal?node-id=4542%3A0'
        }
    }}
/>

# Table

Simple `Table` component to show set of data.

<Preview withToolbar>
    <Story name="Table">
        {() => {
            const [selectedRowIds, setSelectedRowIds] = useState([2, 3]),
                [tableData, setTableData] = useState(data),
                handleFilterData = useCallback((dottedField, order) => setTableData(filterData(dottedField, order, tableData)), [
                    tableData
                ]);
            return (
                <>
                    <DarkBackground showRowWithCardStyle={boolean('Show Row With Card Style', true)} />
                    <Table
                        data={tableData}
                        columns={columns}
                        onSort={handleFilterData}
                        selectedRowIds={selectedRowIds}
                        onRowSelection={setSelectedRowIds}
                        onRowClick={action('Row Clicked')}
                        isLoading={boolean('Loading', false)}
                        isRowSelectable={boolean('Is row selectable', true)}
                        isRowExpandable={boolean('Is row expandable', true)}
                        rowSelectionDisableKey="disabled"
                        size={select('Size', ['S', 'M', 'L'], 'L')}
                        showRowWithCardStyle={boolean('Show Row With Card Style', true)}
                        expandedRowComponent={ExpandedRowComponent}
                    />
                </>
            );
        }}
    </Story>
</Preview>

### Row Accordion

To show row acordion you have to pass two props `isRowExpandable` as `true` and pass react component as `expandedRowComponent` to show details in the expanded area. Type of `expandedRowComponent?: React.FC<{ rowData: any; rowId?: any; disabled?: boolean }>`; We are passing row data, id & disabled state to the component.

You can write your component like below:

```tsx
import { TableProps } from '@medly-components/core';
export const ExpandedRowComponent: TableProps['expandedRowComponent'] = ({ rowData }) => <Text> Hello {`${rowData.name}`}</Text>;
```

### Row as Card style

Rows can be shown with card style when you set `showRowWithCardStyle` as true, and the size of the table will automatically be set as 'L'.

### Props

There are only two required props `data` & `columns`. It would be really great if you provide `rowIdentifier`. `rowIdentifier` is used as key name in data to be used as unique id for rows.

<Props of={Table} />

### Table Prop Types

You can import `TableColumnConfig` to typesafe your column config.

```ts
import { TableColumnConfig } from '@medly-components/core';

const columns: TableColumnConfig[] = [{}, {}];
```

#### Column config type

You can checkout the sample column config in the `JSX` section.

<Props of={ColumnConfigInterface} />

#### TableTheme

<Props of={ThemeInterface} />
